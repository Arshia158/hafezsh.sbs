<!doctype html>
<html dir="rtl" lang="fa" prefix="og: https://ogp.me/ns#">
<head>
    <meta charset="utf-8">
    <title>فال و شناسنامه حافظ شیرازی | فال حافظ آنلاین با تعبیر دقیق</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="description" content="سایت جامع فال حافظ شیرازی با تعبیر دقیق و زندگینامه کامل خواجه حافظ. دریافت فال حافظ، جستجو در غزل‌ها و آشنایی با زندگی لسان‌الغیب">
    <meta name="keywords" content="فال حافظ, حافظ شیرازی, زندگینامه حافظ, خواجه حافظ, لسان‌الغیب, غزلیات حافظ, فال آنلاین, تفال به حافظ, دیوان حافظ, شعر حافظ, آرامگاه حافظ">
    <meta name="author" content="HafezSh.sbs">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://hafezsh.sbs/">
    <link rel="alternate" hreflang="fa" href="https://hafezsh.sbs/">
    <link rel="sitemap" type="application/xml" href="/sitemap.xml">
    <link rel="icon" href="https://uploadkon.ir/uploads/509c28_25a-1259.jpg" type="image/jpeg">
    
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://hafezsh.sbs/">
    <meta property="og:title" content="فال و شناسنامه حافظ شیرازی | فال حافظ آنلاین با تعبیر دقیق">
    <meta property="og:description" content="سایت جامع فال حافظ شیرازی با تعبیر دقیق و زندگینامه کامل خواجه حافظ. دریافت فال حافظ، جستجو در غزل‌ها و آشنایی با زندگی لسان‌الغیب">
    <meta property="og:image" content="https://uploadkon.ir/uploads/143a28_251-1-.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:site_name" content="فال حافظ شیرازی">
    <meta property="og:locale" content="fa_IR">
    
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://hafezsh.sbs/">
    <meta property="twitter:title" content="فال و شناسنامه حافظ شیرازی | فال حافظ آنلاین با تعبیر دقیق">
    <meta property="twitter:description" content="سایت جامع فال حافظ شیرازی با تعبیر دقیق و زندگینامه کامل خواجه حافظ. دریافت فال حافظ، جستجو در غزل‌ها و آشنایی با زندگی لسان‌الغیب">
    <meta property="twitter:image" content="https://uploadkon.ir/uploads/143a28_251-1-.jpg">
    
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "فال و شناسنامه حافظ شیرازی",
        "url": "https://hafezsh.sbs/",
        "description": "سایت جامع فال حافظ شیرازی با تعبیر دقیق و زندگینامه کامل خواجه حافظ",
        "author": {
            "@type": "Organization",
            "name": "HafezSh.sbs"
        },
        "potentialAction": {
            "@type": "SearchAction",
            "target": "https://hafezsh.sbs/poems?q={search_term_string}",
            "query-input": "required name=search_term_string"
        }
    }
    </script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <style type="text/css">
        :root {
            --primary-color: #c0392b;
            --secondary-color: #2c3e50;
            --light-color: #f4f6f9;
            --white-color: #ffffff;
            --text-color: #333;
            --font-family: 'Vazirmatn', sans-serif;
        }
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        body {
            font-family: var(--font-family);
            background-color: var(--light-color);
            color: var(--text-color);
            line-height: 1.7;
            overflow-x: hidden;
        }
        .container {
            max-width: 1000px;
            margin: 20px auto;
            padding: 0 20px;
        }
        .navigation_bar {
            background-color: var(--secondary-color);
            padding: 15px 0;
            border-radius: 10px 10px 0 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        .top_nav_flex ul {
            list-style: none;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 0;
            margin: 0;
        }
        .top_nav_flex ul li {
            margin-left: 30px;
        }
        .top_nav_flex ul li a {
            color: #fff;
            text-decoration: none;
            font-size: 1.1rem;
            font-weight: 500;
            padding: 10px 20px;
            border-radius: 25px;
            transition: all 0.3s ease;
            display: block;
        }
        .top_nav_flex ul li a:hover,
        .top_nav_flex ul li a.active {
            background-color: var(--primary-color);
            color: #fff;
            box-shadow: 0 4px 10px rgba(192, 57, 43, 0.3);
        }
        .main_background {
            background-color: var(--white-color);
            border-radius: 0 0 15px 15px;
            box-shadow: 0 0 25px rgba(0,0,0,0.08);
            overflow: hidden;
        }
        .content-page {
            padding: 0;
        }
        .hero_header {
            background: linear-gradient(135deg, var(--secondary-color), #34495e);
            color: #fff;
            padding: 50px 30px;
            text-align: center;
        }
        .hero_text_header {
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 15px;
        }
        .hero_text {
            font-size: 1.1rem;
            font-weight: 300;
            max-width: 800px;
            margin: 0 auto;
            opacity: 0.9;
        }
        .other_page {
            font-size: 2.5rem;
            font-weight: 700;
        }
        .poem_part {
            padding: 50px 30px;
        }
        .poem_part h1 {
            color: var(--primary-color);
            font-size: 2rem;
            margin-bottom: 20px;
        }
        .poem_part p {
            font-size: 1.1rem;
            text-align: justify;
        }
        .hafezie-img {
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            width: 100%;
            height: auto;
            display: block;
        }
        .niat_button {
            text-align: center;
            padding: 40px 30px 60px;
        }
        .poem_niat {
            background-color: #f8f9fa;
            border: 2px dashed var(--primary-color);
            border-radius: 10px;
            padding: 30px;
            margin-bottom: 30px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }
        .poem_niat p {
            font-size: 1.3rem;
            color: var(--secondary-color);
            font-weight: 500;
            line-height: 2.2;
        }
        .btn-primary {
            background-color: var(--primary-color);
            color: #fff;
            padding: 15px 40px;
            font-size: 1.2rem;
            font-weight: 700;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }
        .btn-primary:hover {
            background-color: #a93226;
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(192, 57, 43, 0.4);
        }
        .single_part {
            padding: 40px 30px;
        }
        .whos_hafez {
            margin-bottom: 40px;
        }
        .single_part h2 {
            color: var(--secondary-color);
            font-size: 1.8rem;
            margin: 30px 0 20px;
            border-right: 5px solid var(--primary-color);
            padding-right: 15px;
        }
        .single_part p {
            font-size: 1.1rem;
            text-align: justify;
        }
        .figure {
            margin-bottom: 1rem;
        }
        .figure-img {
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            width: 100%;
            height: auto;
            display: block;
        }
        .figure-caption {
            color: #6c757d;
            text-align: center;
            margin-top: 10px;
            font-size: 0.9rem;
        }
        footer {
            background-color: var(--secondary-color);
            color: #fff;
            text-align: center;
            padding: 20px 15px;
            margin-top: 60px;
            font-size: 0.9rem;
        }
        footer p {
            margin: 0;
        }
        footer a {
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 700;
        }
        footer a:hover {
            text-decoration: underline;
        }

        #fal-result-container {
            display: none;
            background-color: #fdfdfd;
            border: 1px solid #e0e0e0;
            border-radius: 15px;
            padding: 40px;
            margin: 20px auto 60px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
            max-width: 800px;
        }
        #fal-result-container.show {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        #fal-result-container h2 {
            color: var(--primary-color);
            font-size: 2rem;
            text-align: center;
            margin-bottom: 20px;
            border: none;
            padding: 0;
        }
        #fal-poem {
            background-color: #f8f9fa;
            border-right: 4px solid var(--secondary-color);
            padding: 20px 25px;
            border-radius: 10px;
            font-size: 1.2rem;
            font-weight: 500;
            color: var(--secondary-color);
            margin-bottom: 30px;
            line-height: 2.4;
        }
        #fal-interpreter {
            font-size: 1.1rem;
            text-align: justify;
            color: #555;
            line-height: 1.9;
        }
        #fal-interpreter strong {
            color: var(--secondary-color);
        }
        #loading-spinner {
            display: none;
            text-align: center;
            padding: 20px;
            font-size: 1.1rem;
            color: var(--secondary-color);
        }
        #loading-spinner.show {
            display: block;
        }
        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border-left-color: var(--primary-color);
            animation: spin 1s linear infinite;
            margin: 10px auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .audio-player-container {
            margin-top: 30px;
            text-align: center;
            background-color: #f1f8ff;
            border-radius: 10px;
            padding: 20px;
            border: 1px solid #d1e7ff;
        }
        .audio-player-container h3 {
            color: var(--secondary-color);
            margin-bottom: 15px;
            font-size: 1.3rem;
        }
        .audio-player {
            width: 100%;
            max-width: 500px;
            margin: 0 auto;
        }
        .audio-player audio {
            width: 100%;
            height: 50px;
            border-radius: 8px;
        }

        .mobile-menu-toggle {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 5px;
        }

        @media (max-width: 992px) {
            .container {
                padding: 0 15px;
            }
            .hero_header {
                padding: 40px 20px;
            }
            .hero_text_header, .other_page {
                font-size: 2rem;
            }
            .poem_part, .single_part {
                padding: 40px 20px;
            }
        }

        @media (max-width: 768px) {
            .mobile-menu-toggle {
                display: block;
                position: absolute;
                left: 15px;
                top: 15px;
            }
            
            .top_nav_flex ul {
                flex-direction: column;
                align-items: flex-start;
                max-height: 0;
                overflow: hidden;
                transition: max-height 0.3s ease;
            }
            
            .top_nav_flex ul.active {
                max-height: 300px;
            }
            
            .top_nav_flex ul li {
                margin: 0;
                width: 100%;
            }
            
            .top_nav_flex ul li a {
                padding: 12px 20px;
                border-radius: 0;
                width: 100%;
                text-align: right;
            }
            
            .navigation_bar {
                position: relative;
            }
            
            .hero_header {
                padding: 30px 15px;
            }
            
            .hero_text_header, .other_page {
                font-size: 1.8rem;
            }
            
            .hero_text {
                font-size: 1rem;
            }
            
            .hafezie-img {
                margin-bottom: 30px;
            }
            
            .not_show_tablet {
                display: none;
            }
            
            .poem_part h1, .single_part h2 {
                font-size: 1.6rem;
            }
            
            .poem_niat p {
                font-size: 1.1rem;
            }
            
            .btn-primary {
                font-size: 1.1rem;
                padding: 12px 30px;
            }
            
            #fal-result-container {
                padding: 25px 20px;
                margin: 10px auto 40px;
            }
            
            #fal-result-container h2 {
                font-size: 1.6rem;
            }
            
            #fal-poem {
                font-size: 1.1rem;
                padding: 15px 20px;
            }
            
            .audio-player-container {
                padding: 15px;
            }
        }

        @media (max-width: 576px) {
            .hero_header {
                padding: 20px 15px;
            }
            
            .hero_text_header, .other_page {
                font-size: 1.5rem;
            }
            
            .hero_text {
                font-size: 0.95rem;
            }
            
            .poem_part, .single_part {
                padding: 30px 15px;
            }
            
            .poem_niat {
                padding: 20px;
            }
            
            .poem_niat p {
                font-size: 1rem;
            }
            
            .btn-primary {
                font-size: 1rem;
                padding: 12px 25px;
            }
            
            #fal-result-container {
                padding: 20px 15px;
            }
            
            #fal-result-container h2 {
                font-size: 1.4rem;
            }
            
            #fal-poem {
                font-size: 1rem;
                padding: 15px;
            }
            
            #fal-interpreter {
                font-size: 1rem;
            }
            
            .audio-player-container h3 {
                font-size: 1.1rem;
            }
        }
    </style>
</head>
<body>
    <div class="main_background">
        <nav class="navigation_bar">
            <button class="mobile-menu-toggle" id="mobile-menu-toggle">☰</button>
            <div class="top_nav_flex">
                <ul id="nav-menu">
                    <li><a href="/" id="home-link" class="nav-link active">فال حافظ</a></li>
                    <!--<li><a href="/poems" id="poems-link" class="nav-link">غزل‌ها</a></li>-->
                    <li><a href="/about" id="about-link" class="nav-link">حافظ شناسی</a></li>
                </ul>
            </div>
        </nav>
        
        <div id="home-page" class="content-page">
            <header class="hero_header">
                <div class="row display_flex">
                    <div class="col-md-6">
                        <h1 class="hero_text_header">آداب درست فال حافظ</h1>
                        <h2 class="hero_text_header">چه زمانی فال حافظ بگیریم؟</h2>
                        <p class="hero_text">مشهور است که امروز در خانهٔ هر ایرانی یک دیوان حافظ یافت می‌شود. ایرانیان طبق رسوم قدیمی خود در روزهای عید ملی یا مذهبی نظیر نوروز بر سر سفره هفت سین، و یا شب یلدا، با کتاب حافظ فال می‌گیرند.</p>
                    </div>
                    <div class="col-md-5">
                        <img src="https://uploadkon.ir/uploads/143a28_251-1-.jpg" alt="آرامگاه حافظ (حافظیه) در شیراز" class="hafezie-img">
                    </div>
                </div>
            </header>
            
            <section class="poem_part">
                <div class="row">
                    <div class="col-md-12">
                        <h2>چطور فال حافظ بگیریم؟</h2>
                        <h3>روش صحیح گرفتن فال حافظ</h3>
                        <p>یک نفر از بزرگان خانواده یا کسی که بتواند شعر را به خوبی بخواند ابتدا نیت می‌کند، یعنی در دل آرزویی می‌کند. سپس به طور تصادفی صفحه‌ای را از کتاب حافظ می‌گشاید و با صدای بلند شروع به خواندن می‌کند. کسانی که ایمان مذهبی داشته باشند هنگام فال گرفتن فاتحه‌ای می‌خوانند و سپس کتاب حافظ را می‌بوسند، آنگاه با ذکر اورادی آن را می‌گشایند و فال خود را می‌خوانند.
                        <br>
                        نیت کننده معمولاً در هنگام تفأل از دیوان حافظ، او را به عزیزترین کسانش یعنی به خداوند و معشوقه اش (شاخ نبات) قسم می دهد. این قسم معمولاً به این شکل ادا می شود:</p>
                    </div>
                </div>
            </section>
            
            <div class="niat_button">
                <div class="poem_niat">
                    <p>ای حافظ شیرازی، تو محرم هر رازی</p>
                    <p>تو را به خدا و به شاخ نباتت قسم می دهم</p>
                    <p>که هر چه صلاح و مصلحت می بینی</p>
                    <p>برایم آشکار و آرزوی مرا براورده سازی</p>
                </div>
                <button class="btn btn-primary" onclick="getFal()">برای گرفتن فال خود اینجا را لمس کنید</button>
            </div>

            <div id="loading-spinner">
                <div class="spinner"></div>
                <p>در حال دریافت فال از حافظ...</p>
            </div>
            
            <div id="fal-result-container">
                <h2 id="fal-title"></h2>
                <div id="fal-image-container"></div>
                <div id="fal-poem"></div>
                <p id="fal-interpreter"></p>
                <div id="fal-audio-container"></div>
            </div>
        </div>
        
        <!--
        <div id="poems-page" class="content-page" style="display: none;">
            <header class="hero_header single_hero">
                <div class="row display_flex">
                    <div class="col-md-12">
                        <h1 class="other_page">جستجو در غزل‌های حافظ</h1>
                    </div>
                </div>
            </header>
            
            <div class="search-section">
                <h2>جستجوی غزل</h2>
                <div class="search-form">
                    <div class="search-input-group">
                        <input type="text" id="search-input" class="search-input" placeholder="شماره یا عنوان غزل را وارد کنید...">
                        <button id="search-button" class="search-button" onclick="searchPoem()">جستجو</button>
                    </div>
                    <div class="search-options">
                        <div class="search-option">
                            <input type="radio" id="search-by-id" name="search-type" value="id" checked>
                            <label for="search-by-id">جستجو بر اساس شماره</label>
                        </div>
                        <div class="search-option">
                            <input type="radio" id="search-by-title" name="search-type" value="title">
                            <label for="search-by-title">جستجو بر اساس عنوان</label>
                        </div>
                    </div>
                </div>
            </div>

            <div id="search-loading-spinner">
                <div class="spinner"></div>
                <p>در حال جستجوی غزل...</p>
            </div>
            
            <div id="search-result-container">
                <h2 id="search-title"></h2>
                <div id="search-poem"></div>
                <p id="search-interpreter"></p>
                <div id="search-audio-container"></div>
            </div>
        </div>
        -->
        
        <div id="about-page" class="content-page" style="display: none;">
            <header class="hero_header single_hero">
                <div class="row display_flex">
                    <div class="col-md-12">
                        <h1 class="other_page">معرفی کوتاه و جامع از سرگذشت حافظ ملقب به لِسان‌ُالْغِیْب</h1>
                    </div>
                </div>
            </header>
            
            <main class="single_part" itemscope itemtype="http://schema.org/Person">
                <meta itemprop="birthDate" content="1326-01-01">
                <meta itemprop="deathDate" content="1390-01-01">
                <link itemprop="sameAs" href="https://fa.wikipedia.org/wiki/%D8%AD%D8%A7%D9%81%D8%B8">
                
                <div class="row whos_hafez">
                    <div class="col-md-3">
                        <figure class="figure">
                            <img itemprop="image" src="https://uploadkon.ir/uploads/76cc28_25attraction-1576931141-1.jpg" alt="آرامگاه حافظ (حافظیه) در شیراز" class="figure-img">
                            <figcaption class="figure-caption" itemprop="description">آرامگاه حافظ در شیراز استان فارس</figcaption>
                        </figure>
                    </div>
                    <div class="col-md-9">
                        <p itemprop="description">
                            <span itemprop="name">خواجه شمس‌الدین محمد بن بهاءالدّین محمد حافظ شیرازی</span>
                            (زاده ح. ۷۲۷ (قمری)- درگذشته ۷۹۲ (قمری))، معروف به 
                            <span itemprop="additionalName">لسان‌الغیب</span>, 
                            ترجمان الاسرار، لسان‌العرفا و ناظم‌الاولیا، شاعر بزرگ سدهٔ هشتم ایران (برابر قرن چهاردهم میلادی) و یکی از سخنوران نامی جهان است. بیش‌تر شعرهای او غزل هستند که به غزلیات حافظ شهرت دارند. او از مهم‌ترین تأثیرگذاران بر شاعران پس از خود شناخته می‌شود.
                        </p>
                    </div>
                </div>
                
                <div class="row whos_hafez">
                    <div class="col-md-12">
                        <h2>زندگی‌نامه غزل‌سرای فارسی</h2>
                        <p itemprop="description">
                            اطلاعات چندانی از خانواده و اجداد خواجه حافظ در دست نیست و ظاهراً پدرش «بهاءالدین محمد» نام داشته و مادرش اهل کازرون بوده‌است. در اشعار او که می‌تواند یگانه منبع موثّق زندگی او باشد اشاره‌های اندکی از زندگی شخصی و خصوصی او یافت می‌شود. آنچه از فحوای تذکره‌ها به دست می‌آید بیشتر افسانه‌هایی است که از این شخصیّت در ذهن عوام ساخته و پرداخته شده‌است. با این همه آنچه با تکیه بر اشارات دیوان او و برخی منابع معتبر قابل بیان است آن است که او در خانواده‌ای از نظر مالی در حد متوسط جامعه زمان خویش متولد شده‌است. در نوجوانی قرآن را با چهارده روایت آن از برکرده و از همین رو به حافظ ملقب گشته‌است.
                        </p>
                    </div>
                </div>
                
                <div class="row whos_hafez">
                    <div class="col-md-8">
                        <p itemprop="description">
                            در دوران حکومت شاه شیخ ابواسحاق (متوفای ۷۵۸ ق) به دربار راه پیدا کرده و احتمالاً شغل دیوانی پیشه کرده‌است. شاعری پیشه اصلی او نبوده و امرار معاش او از طریق شغلی دیگر (احتمالاً دیوانی) تأمین می‌شده‌است. در این خصوص نیز اشارات متعددی در دیوان او وجود دارد که بیان‌کننده اتکای او به شغلی جدای از شاعری است. دربارهٔ سال دقیق تولد او بین مورخان و حافظ‌شناسان اختلاف نظر وجود دارد.
                        </p>
                        <p>
                            <a target="_blank" href="https://fa.wikipedia.org/wiki/%D8%AD%D8%A7%D9%81%D8%B8" rel="nofollow noreferrer noopener">منبع: ویکی‌پدیا</a>
                        </p>
                    </div>
                    <div class="col-md-4">
                        <figure class="figure">
                            <img itemprop="image" src="https://uploadkon.ir/uploads/3b7528_25d36020e0-a06d-11ef-bfbe-19e6b8aebd5e-1-.png" alt="تصویر هنری از حافظ شیرازی" class="figure-img">
                            <figcaption class="figure-caption" itemprop="description">تصویری هنری از حافظ</figcaption>
                        </figure>
                    </div>
                </div>
            </main>
        </div>
        
        <footer>
            <p>کلیه حقوق مادی و معنوی این سامانه متعلق به <a href="https://hafezsh.sbs/">HafezSh.sbs</a> می باشد.</p>
            <p>
                <a href="/">فال حافظ</a> | 
                <!-- <a href="/poems">غزل‌ها</a> | -->
                <a href="/about">حافظ شناسی</a>
            </p>
        </footer>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const homeLink = document.getElementById('home-link');
            const aboutLink = document.getElementById('about-link');
            const homePage = document.getElementById('home-page');
            const aboutPage = document.getElementById('about-page');
            const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
            const navMenu = document.getElementById('nav-menu');
            
            mobileMenuToggle.addEventListener('click', function() {
                navMenu.classList.toggle('active');
            });
            
            function showPage(pageId, linkElement) {
                homePage.style.display = 'none';
                aboutPage.style.display = 'none';
                
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.classList.remove('active');
                });
                
                const targetPage = document.getElementById(pageId);
                if (targetPage) {
                    targetPage.style.display = 'block';
                    linkElement.classList.add('active');
                } else {
                    linkElement.classList.add('active');
                }
                
                navMenu.classList.remove('active');
                
                const url = linkElement.getAttribute('href');
                history.pushState({page: pageId}, '', url);
                
                updatePageTitle(pageId);
            }
            
            function updatePageTitle(pageId) {
                let title = "فال و شناسنامه حافظ شیرازی";
                
                if (pageId === 'about-page') {
                    title += " | حافظ شناسی";
                }
                
                document.title = title;
            }
            
            homeLink.addEventListener('click', function(event) {
                event.preventDefault();
                showPage('home-page', homeLink);
            });
            
            aboutLink.addEventListener('click', function(event) {
                event.preventDefault();
                showPage('about-page', aboutLink);
            });
            
            window.addEventListener('popstate', function(event) {
                if (event.state && event.state.page) {
                    let linkElement;
                    
                    if (event.state.page === 'home-page') {
                        linkElement = homeLink;
                    } else if (event.state.page === 'about-page') {
                        linkElement = aboutLink;
                    }
                    
                    if (linkElement) {
                        showPage(event.state.page, linkElement);
                    }
                }
            });
            
            const path = window.location.pathname;
            if (path === '/about') {
                showPage('about-page', aboutLink);
            } else {
                history.replaceState({page: 'home-page'}, '', '/');
            }
        });

        async function getFal() {
            const apiUrl = 'https://fallhafez.wuaze.com/get_fal.php';
            const resultContainer = document.getElementById('fal-result-container');
            const loadingSpinner = document.getElementById('loading-spinner');
            const falTitle = document.getElementById('fal-title');
            const falImageContainer = document.getElementById('fal-image-container');
            const falPoem = document.getElementById('fal-poem');
            const falInterpreter = document.getElementById('fal-interpreter');
            const falAudioContainer = document.getElementById('fal-audio-container');

            loadingSpinner.classList.add('show');
            resultContainer.classList.remove('show');

            try {
                const response = await fetch(apiUrl);
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const data = await response.json();

                if (data && data.number && data.ghazal && data.tabir) {
                    falTitle.textContent = data.number;
                    falImageContainer.innerHTML = `<img src="${data.image}" alt="تصویر فال حافظ" style="max-width: 100%; border-radius: 10px; margin-bottom: 20px; display: block; margin-left: auto; margin-right: auto;">`;
                    falPoem.textContent = data.ghazal;
                    falInterpreter.innerHTML = '<strong>تعبیر فال:</strong> ' + data.tabir;
                    falAudioContainer.innerHTML = `
                        <div class="audio-player-container">
                            <h3>پخش صوتی غزل</h3>
                            <div class="audio-player">
                                <audio controls>
                                    <source src="${data.voice}" type="audio/mpeg">
                                    مرورگر شما از پخش صوت پشتیبانی نمی‌کند.
                                </audio>
                            </div>
                        </div>
                    `;
                } else {
                    console.error('Invalid or incomplete data received from API:', data);
                    throw new Error("Invalid data structure from API");
                }

                loadingSpinner.classList.remove('show');
                resultContainer.classList.add('show');

            } catch (error) {
                console.error('Could not fetch the fal:', error);
                loadingSpinner.classList.remove('show');
                falTitle.textContent = 'خطا در دریافت فال';
                falImageContainer.innerHTML = '';
                falPoem.textContent = '';
                falInterpreter.textContent = 'متاسفانه در ارتباط با سرور حافظ مشکلی پیش آمده است. لطفاً کمی دیرتر دوباره تلاش کنید.';
                falAudioContainer.innerHTML = '';
                resultContainer.classList.add('show');
            }
        }
    </script>
</body>
</html>
